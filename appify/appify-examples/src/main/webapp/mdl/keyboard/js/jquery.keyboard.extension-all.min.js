/*! jQuery UI Virtual Keyboard - ALL Extensions + Mousewheel */
/*! jQuery UI Virtual Keyboard Alt Key Popup v1.0 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";var b=a.keyboard;a.extend(b.css,{altKeyPopup:"ui-keyboard-popup",altKeyOverlay:"ui-keyboard-overlay"}),b.altKeys=a.extend({a:"å æ ā ă ą à á â ã ä",A:"Å Æ Ā Ă Ą À Á Â Ã Ä",c:"ç ć ĉ ċ č",C:"Ç Ć Ĉ Ċ Č",d:"ď ð ď",D:"Ď Ð Ď",e:"ė ę ĕ ě ə è é ê ë ē",E:"Ė Ę Ĕ Ě Ǝ È É Ê Ë Ē",g:"ģ ğ ĝ ġ",G:"Ģ Ğ Ĝ Ġ",h:"ĥ ħ",H:"Ĥ Ħ",i:"ı į ī ï î í ì ĩ ĭ",I:"İ Į Ī Ï Î Í Ì Ĩ Ĭ",j:"ĵ",J:"Ĵ",k:"ķ",K:"Ķ",l:"Ł Ľ Ļ Ĺ Ŀ",L:"ł ľ ļ ĺ ŀ",n:"ŉ ň ņ ń ñ",N:"ŉ Ň Ņ Ń Ñ",o:"œ ő ø ö õ ô ó ò ō ŏ",O:"Œ Ő Ø Ö Õ Ô Ó Ò Ō Ŏ",r:"ŕ ř ŗ",R:"Ŕ Ř Ŗ",s:"ś š ş ß § ŝ",S:"Ś Š Ş ẞ § Ŝ",t:"þ ť ț ţ ŧ",T:"Þ Ť Ț Ţ Ŧ",u:"ų ű ů ū ü û ú ù ũ ŭ",U:"Ų Ű Ů Ū Ü Û Ú Ù Ũ Ŭ",w:"ŵ",W:"Ŵ",y:"ý",Y:"Ý",z:"ź ż ž",Z:"Ź Ż Ž","!":"¡",$:"€ £ ¤ ¥ ¢ ₡ ₱ ₩ ₹ ₪ ₭ ₮ ₦ ₤","?":"¿","'":"〈 「 『 “",'"':"〉 」 』 ”","(":"《 【 〔",")":"》 】 〕"},b.altKeys),a.fn.addAltKeyPopup=function(c){var d={holdTime:500,popupVisible:"popup-visible"};return this.each(function(){var e=a(this).data("keyboard");e&&(e.altkeypopup_options=a.extend({},d,c),e.altkeypopup_namespace=e.namespace+"AltKeyPopup",e.altkeypopup_setup=function(){var c,d="mousedown touchstart ".split(" ").join(e.altkeypopup_namespace+" "),f="mouseup touchend touchcancel ".split(" ").join(e.altkeypopup_namespace+" ");e.options.repeatRate=0,e.$allKeys.bind(d,function(){clearTimeout(c);var d=a(this),f=d.attr("data-action")||"";f in b.altKeys&&(c=setTimeout(function(){e.altKeyPopup_popup(f,d)},e.altkeypopup_options.holdTime))}).bind(f,function(){clearTimeout(c)})},e.altKeyPopup_popup=function(c,d){var f,g,h,i,j,k=b.css,l=e.$keyboard.outerWidth(),m=e.$keyboard.outerHeight();e.altKeyPopup_$overlay=a('<div class="'+k.altKeyOverlay+'" />').css({width:l,height:m}).appendTo(e.$keyboard).bind("click touchstart",function(){e.altKeyPopup_$overlay.remove()}),"bksp"!==c&&b.keyaction.bksp(e),g=a('<div class="'+k.altKeyPopup+" "+e.options.css.container+'" />'),f=b.altKeys[c].split(/\s+/),e.buildRow(g,0,f,[]),g.appendTo(e.altKeyPopup_$overlay).children().bind("mousedown touchstart",function(c){var d=a(this).attr("data-action");d in b.keyaction&&a.isFunction(b.keyaction[d])?b.keyaction[d](e,this,c):e.insertText(d),e.altKeyPopup_$overlay.remove()}).bind("mouseover mouseleave",function(b){a(this).toggleClass(e.options.css.buttonHover,"mouseover"===b.type)}),h=d.position().left-g.outerWidth()/2+d.outerWidth()/2,h+g.outerWidth()>l&&(h=l-g.outerWidth(),0>h&&g.css({width:l,height:"auto"})),i=d.position().top-d.outerHeight()-5,j=e.$keyboard.find("."+k.keySet).position().top,i+g.outerHeight()>m&&(i=m-g.outerHeight(),j>i&&g.css({height:m-j,width:"auto"})),g.css({position:"relative",top:j>i?j:i,left:0>h?0:h}),e.$el.trigger(e.altkeypopup_options.popupVisible,[e])},e.options.alwaysOpen&&e.isVisible()&&e.altkeypopup_setup(),e.$el.bind(b.events.kbBeforeVisible+e.altkeypopup_namespace,function(){e.altkeypopup_setup()}))})}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";a.fn.addAutocomplete=function(){return this.each(function(){var b=a(this).data("keyboard");b&&(b.autocomplete_new_version=function(a){return a[0]=parseInt(a[0],10),a[0]>1||1===a[0]&&parseInt(a[1],10)>=9}(a.ui.version.split(".")),b.autocomplete_namespace=b.namespace+"Autocomplete",b.autocomplete_init=function(){b.options.alwaysOpen&&b.isVisible()&&b.autocomplete_setup(),b.$el.unbind(b.autocomplete_namespace).bind(a.keyboard.events.kbVisible+b.autocomplete_namespace,function(){b.autocomplete_setup()}).bind(a.keyboard.events.kbChange+b.autocomplete_namespace,function(){b.hasAutocomplete&&b.isVisible()&&b.$el.val(b.$preview.val()).trigger("keydown.autocomplete")}).bind(a.keyboard.events.kbHidden+b.autocomplete_namespace,function(){b.$el.autocomplete("close")}).bind("autocompleteopen"+b.autocomplete_namespace,function(){b.hasAutocomplete&&b.$autocomplete.menu.element.position({of:b.$keyboard,my:"right top",at:"left top",collision:"flip"})}).bind("autocompleteselect"+b.autocomplete_namespace,function(a,c){var d=c.item&&c.item.value||"";b.hasAutocomplete&&""!==d&&(b.$preview.val(d).focus(),b.last.start=d.length,b.last.end=d.length)})},b.autocomplete_setup=function(){b.$autocomplete=b.$el.data("autocomplete")||b.$el.data("uiAutocomplete")||b.$el.data("ui-autocomplete"),b.hasAutocomplete="undefined"==typeof b.$autocomplete?!1:b.$autocomplete.options.disabled?!1:!0,b.hasAutocomplete&&(b.$preview.bind("keydown"+b.autocomplete_namespace,function(a){b.$el.val(b.$preview.val()).triggerHandler(a)}),b.$allKeys.bind("mouseup mousedown mouseleave touchstart touchend touchcancel ".split(" ").join(b.autocomplete_namespace+" "),function(a){clearTimeout(b.$autocomplete.searching);var c=a;b.$autocomplete.searching=setTimeout(function(){b.$autocomplete.term!==b.$autocomplete.element.val()&&(b.$autocomplete.selectedItem=null,b.$autocomplete.search(null,c))},b.$autocomplete.options.delay)}))},b.origEscClose=b.escClose,b.escClose=function(c){(!b.hasAutocomplete||"ui-active-menuitem"!==c.target.id&&!a(c.target).closest("ul").hasClass("ui-autocomplete"))&&b.origEscClose(c)},b.autocomplete_init())})}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";var b=a.keyboard;a.extend(b.css,{extender:"ui-keyboard-extender"}),a.extend(b.layouts,{numpad:{normal:["{clear} / * -","7 8 9 +","4 5 6 %","1 2 3 =","0 {dec} {left} {right}"]}}),a.extend(b.keyaction,{extender:function(a,b){return a.extender_toggle(),!1}}),a.fn.addExtender=function(c){var d={layout:"numpad",showing:!1,reposition:!0};return this.each(function(){var e,f=a(this).data("keyboard");f&&(e=f.extender_options=a.extend({},d,c),a.extend(!0,b.language.en,{display:{extender:" "}}),f.extender_namespace=f.namespace+"extender",f.extender_setup=function(){var a,c=e.layout;"undefined"==typeof b.builtLayouts[c]&&f.buildKeyboard(c),a=b.builtLayouts[c].$keyboard.find("."+b.css.keySet+"-normal").clone(),a.removeClass().removeAttr("name").addClass(b.css.extender).toggle(e.showing).children("button").removeAttr("data-pos"),f.$keyboard.append(a),f.extender_toggle(f.extender_options.showing),f.bindKeys()},f.extender_toggle=function(c){f.extender_options.showing="undefined"==typeof c?!f.extender_options.showing:c,f.$keyboard.find("div."+b.css.extender).toggle(f.extender_options.showing).end().find("."+b.css.keySet).css("float",f.extender_options.showing?"left":"none").end().find("button."+b.css.extender).toggleClass(f.options.css.buttonActive,f.extender_options.showing),f.extender_options.reposition&&a(window).trigger("resize")},f.options.alwaysOpen&&f.isVisible()&&f.extender_setup(),f.$el.bind(b.events.kbBeforeVisible+f.extender_namespace,function(){f.extender_setup()}))})}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){a.fn.addMobile=function(b){var c,d={container:{theme:"b",cssClass:"ui-body"},input:{theme:"b",cssClass:""},buttonMarkup:{theme:"b",cssClass:"ui-btn",shadow:"true",corners:"true"},buttonHover:{theme:"b",cssClass:"ui-btn-hover"},buttonAction:{theme:"b",cssClass:"ui-btn-active"},buttonActive:{theme:"b",cssClass:"ui-btn-active"},allThemes:"a b c"};return this.each(function(){var e=a(this).data("keyboard");e&&"undefined"!=typeof a.fn.textinput&&(e.mobile_options=c=a.extend(!0,{},d,b),e.mobile_themes=a.trim((" "+c.allThemes).split(" ").join(" "+c.buttonMarkup.cssClass+"-")+(" "+c.allThemes).split(" ").join(" "+c.buttonAction.cssClass+"-")+(" "+c.allThemes).split(" ").join(" "+c.buttonActive.cssClass+"-")),"undefined"==typeof e.options.mobile_savedActiveClass&&(e.options.mobile_savedActiveClass=""+e.options.css.buttonActive),e.mobile_init=function(){a("."+a.keyboard.css.input).textinput(),e.options.alwaysOpen&&e.isVisible&&e.mobile_setup(),e.$el.unbind(e.namespace+"Mobile").bind(a.keyboard.events.kbBeforeVisible+e.namespace+"Mobile",function(){e.$keyboard.css("visibility","hidden")}).bind(a.keyboard.events.kbVisible+e.namespace+"Mobile",function(){e.mobile_setup(),e.$keyboard.css("visibility","visible"),e.$preview.focus()})},e.mobile_setup=function(){var b,d=a.keyboard.css,f=e.options,g=e.mobile_themes;e.mobile_$actionKeys=e.$keyboard.find("."+e.options.css.buttonAction),f.css.buttonActive=f.mobile_savedActiveClass+" "+e.modOptions(c.buttonActive,c.buttonMarkup),e.$keyboard.addClass(e.modOptions(c.container,c.container)).find("."+d.preview).removeClass("ui-widget ui-widget-content").addClass(e.modOptions(c.input,c.input)).end().find("button").removeClass(a.trim("ui-corner-all ui-state-default "+g)).addClass(e.modOptions(c.buttonMarkup,c.buttonMarkup)).not(e.mobile_$actionKeys).hover(function(){a(this).removeClass(g).addClass(e.modOptions(c.buttonHover,c.buttonMarkup))},function(){a(this).removeClass(g+" "+c.buttonHover.cssClass).addClass(e.modOptions(c.buttonMarkup,c.buttonMarkup))}),e.mobile_$actionKeys.removeClass(g).addClass(e.modOptions(c.buttonAction,c.buttonMarkup)),e.msie&&e.$preview[0]!==e.el&&(e.$preview.hide(),e.$keyboard.css("width",""),e.width=e.$keyboard.outerWidth(),e.$keyboard.width(e.width+parseInt(e.$preview.css("fontSize"),10)),e.$preview.width(e.width),e.$preview.show()),a.ui&&a.ui.position&&(b=f.position,b.of=b.of||e.$el.data("keyboardPosition")||e.$el,b.collision=b.collision||"flipfit flipfit",e.$keyboard.position(b))},e.modOptions=function(a,b){var c=" "+(a.cssClass||"");return c+" "+(b&&b.cssClass?b.cssClass+"-"+(a.theme||""):"")+("true"==a.shadow?" ui-shadow":"")+("true"==a.corners?" ui-corner-all":"")},e.mobile_init())})}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";a.keyboard=a.keyboard||{},a.keyboard.navigationKeys={toggle:112,enter:13,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,caretrt:45,caretlt:46,caretrgt:function(b){a.keyboard.keyaction.right(b),b.$preview.focus().caret(b.last)},caretlft:function(b){a.keyboard.keyaction.left(b),b.$preview.focus().caret(b.last)}},a.fn.addNavigation=function(b){return this.each(function(){var c,d,e=a(this).data("keyboard"),f=e.options,g={position:[0,0],toggleMode:!1,focusClass:"hasFocus"},h=a.keyboard.events;e&&(e.navigation_options=c=a.extend({},g,b),e.navigation_keys=d=a.extend({},a.keyboard.navigationKeys),e.navigation_namespace=e.namespace+"Nav",e.saveNav=[e.options.tabNavigation,e.options.enterNavigation],e.allNavKeys=a.map(d,function(a,b){return a}),e.navigation_init=function(){var b=a.keyboard.css;e.$keyboard.toggleClass(c.focusClass,c.toggleMode).find("."+b.keySet+":visible").find("."+b.keyButton+'[data-pos="'+c.position[0]+","+c.position[1]+'"]').addClass(f.css.buttonHover),e.$preview.unbind(e.navigation_namespace).bind("keydown"+e.navigation_namespace,function(a){return e.checkKeys(a.which)})},e.checkKeys=function(b,d){if("undefined"!=typeof b){var f=e.navigation_keys,g=a.keyboard.css;return(b===f.toggle||d)&&(c.toggleMode=d?!1:!c.toggleMode,e.options.tabNavigation=c.toggleMode?!1:e.saveNav[0],e.options.enterNavigation=c.toggleMode?!1:e.saveNav[1]),e.$keyboard.toggleClass(c.focusClass,c.toggleMode),c.toggleMode&&b===f.enter?(e.$keyboard.find("."+g.keySet+":visible").find("."+g.keyButton+'[data-pos="'+c.position[0]+","+c.position[1]+'"]').trigger(h.kbRepeater),!1):c.toggleMode&&a.inArray(b,e.allNavKeys)>=0?(e.navigateKeys(b),!1):void 0}},e.navigateKeys=function(b,d,g){g=g||c.position[1],d=d||c.position[0];var h=a.keyboard.css,i=e.$keyboard.find("."+h.keySet+":visible"),j=i.find("."+h.endRow).length-1,k=i.find("."+h.keyButton+'[data-pos^="'+d+',"]').length-1,l=e.last,m=e.$preview.val().length,n=e.navigation_keys;switch(b){case n.pageup:d=0;break;case n.pagedown:d=j;break;case n.end:g=k;break;case n.home:g=0;break;case n.left:g+=g>0?-1:0;break;case n.up:d+=d>0?-1:0;break;case n.right:g+=1;break;case n.down:d+=d+1>j?0:1;break;case n.caretrt:l.start++;break;case n.caretlt:l.start--}(b===n.caretrt||b===n.caretlt)&&(l.start=l.start<0?0:l.start>m?m:l.start,e.last.start=e.last.end=l.end=l.start,e.$preview.focus().caret(e.last)),k=i.find("."+h.keyButton+'[data-pos^="'+d+',"]').length-1,g>k&&(g=k),i.find("."+f.css.buttonHover).removeClass(f.css.buttonHover),i.find("."+h.keyButton+'[data-pos="'+d+","+g+'"]').addClass(f.css.buttonHover),c.position=[d,g]},e.options.alwaysOpen&&e.isVisible&&(e.$keyboard.find("."+f.css.buttonHover).removeClass(f.css.buttonHover),e.navigation_init()),e.$el.unbind(e.navigation_namespace).bind(h.kbVisible+e.navigation_namespace,function(a){e.$keyboard.find("."+f.css.buttonHover).removeClass(f.css.buttonHover),e.navigation_init()}).bind(h.kbInactive+e.navigation_namespace+" "+h.kbHidden+e.navigation_namespace,function(a){e.checkKeys(a.which,!0)}).bind(h.kbKeysetChange+e.navigation_namespace,function(){e.navigateKeys(null)}).bind("navigate navigateTo ".split(" ").join(e.navigation_namespace+" "),function(b,c,d){var f;c=isNaN(c)?c.toLowerCase():c,c in e.navigation_keys?(f=e.navigation_keys[c],isNaN(f)&&f in a.keyboard.keyaction?a.keyboard.keyaction[f](e,this,b):a.isFunction(f)?f(e):e.checkKeys(f)):"string"==typeof c&&c in a.keyboard.keyaction?a.keyboard.keyaction[c](e,this,b):e.navigateKeys(null,c,d)}))})}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";a.keyboard=a.keyboard||{},a.fn.previewKeyset=function(b){return this.each(function(){var c=a(this).data("keyboard"),d={sets:["normal","shift","alt","alt-shift"]};c&&(c.previewKeyset_options=a.extend({},d,b),c.previewKeyset=function(){var b=a.keyboard.css,d=c.previewKeyset_options.sets,e=c.$keyboard.find("."+b.keySet).filter('[name="'+d.join('"],[name="')+'"]');e.length>1&&e.eq(0).find("."+b.keyButton).not("."+b.keyAction).each(function(){var c,f,g={},h=d.length,i=e.find('button[data-pos="'+a(this).attr("data-pos")+'"]');for(c=0;h>c;c++)f=i.eq(c).parent().attr("name"),a.inArray(f,d)>=0&&(g["data-"+f]=i.eq(c).find("."+b.keyText).text());i.attr(g)})},c.options.alwaysOpen&&c.isVisible()?c.previewKeyset():c.$el.bind(a.keyboard.events.kbBeforeVisible+c.namespace+"Preview",function(){c.previewKeyset()}))})}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";a.keyboard=a.keyboard||{},a.fn.addScramble=function(b){var c,d={targetKeys:/[a-z\d]/i,byRow:!0,byKeySet:!1,randomizeOnce:!0,sameForAll:!1,init:null};return this.each(function(){var e,f=a(this).data("keyboard"),g=f.options;f&&!f.scramble_options&&(e=f.scramble_options=a.extend({},d,b),f.scramble_setup=function(b){var c,d,g,h,i,j,k,l,m,n,o;if(c=b.find("."+a.keyboard.css.keySet),b.length){for(e.byKeySet&&(c=c.eq(0)),d=0;d<c.length;d++)if(g=c.eq(d),k=0,o=[],m=[],l=[],n=[],g.children("button, span, br").each(function(){"BR"===this.tagName?e.byRow?(o.push(this),m.push(!1),n[k]=o,l[k]=m,o=[],m=[],k++):(n[k]=this,l[k]=!1,k++):(j=a(this).attr("data-value")||"",j=1===j.length&&e.targetKeys.test(j)?j:!1,e.byRow?(o.push(this),m.push(j)):(n[k]=this,l[k]=j,k++))}),g.find("."+a.keyboard.css.endRow).remove(),e.byRow)for(i=0;i<n.length;i++)for(o=f.shuffle(n[i],l[i]),h=0;h<o.length;h++)g.append(o[h]);else for(o=f.shuffle(n,l),h=0;h<o.length;h++)g.append(o[h]);return e.byKeySet&&(b=f.realign(b)),b}},f.shuffle=function(a,b){for(var c,d,e=a.length;e>0;)d=Math.floor(Math.random()*e),b[e-1]===!1&&e--,b[e-1]!==!1&&b[d]!==!1&&(e--,c=a[e],a[e]=a[d],a[d]=c);return a},f.realign=function(b){var c,d,e,f=b.find("."+a.keyboard.css.keySet),g=f.eq(0);return f=f.filter(":gt(0)"),g.children().each(function(b,g){d="BR"===g.tagName,e=a(g).attr("data-pos"),f.each(function(b,f){c=d?"br:first":'button[data-pos="'+e+'"]',a(f).find(c).appendTo(f)})}),b},g.create=function(){var b=g.layout;a.keyboard.builtLayouts[b]={mappedKeys:{},acceptedKeys:[],$keyboard:null},"undefined"==typeof a.keyboard.builtLayouts[f.orig_layout]&&(f.layout=g.layout=f.orig_layout,f.buildKeyboard(f.layout,!0),f.layout=g.layout=b),a.keyboard.builtLayouts[b]=a.extend(!0,{},a.keyboard.builtLayouts[f.orig_layout]),e.randomizeOnce&&(a.keyboard.builtLayouts[b].$keyboard=f.scramble_setup(a.keyboard.builtLayouts[f.orig_layout].$keyboard.clone())),f.$keyboard=a.keyboard.builtLayouts[b].$keyboard,e.randomizeOnce||f.$el.bind(a.keyboard.events.kbBeforeVisible+f.namespace+"Scramble",function(a,b){b.$keyboard=b.scramble_setup(b.$keyboard)})},/^scrambled/.test(g.layout)||(f.orig_layout=g.layout,c=c||"scrambled"+Math.round(1e4*Math.random()),g.layout=e.sameForAll?c:"scrambled"+Math.round(1e4*Math.random())),g.alwaysOpen&&f.$keyboard.length?setTimeout(function(){f.$keyboard=f.scramble_setup(f.$keyboard),a.isFunction(e.init)&&e.init(f)},0):a.isFunction(e.init)&&e.init(f))})}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){a.fn.addTyping=function(b){var c={showTyping:!0,lockTypeIn:!1,delay:250},d=a.keyboard;return this.each(function(){var e,f=a(this).data("keyboard");f&&(e=f.typing_options=a.extend({},c,b),f.typing_keymap={" ":"space",'"':"34","'":"39","&nbsp;":"space","\b":"bksp","{b}":"bksp","{d}":"del","{l}":"left","{r}":"right","\n":"enter","\r":"enter","{e}":"enter","	":"tab","{t}":"tab"},f.typing_xref={8:"bksp",9:"tab",13:"enter",32:"space",46:"del"},f.typing_event=!1,f.typing_namespace=f.namespace+"typing",e.savedLockInput=f.options.lockInput,f.typing_setup=function(){var a=d.events,b=f.typing_namespace;f.$el.add(f.$preview).unbind(b),f.$el.bind([a.kbHidden,a.kbInactive,""].join(b+" "),function(a){f.typing_reset()}).bind(d.events.kbBeforeVisible+b,function(){f.typing_setup()}),f.$allKeys.bind("mousedown"+b,function(){f.typing_reset()}),f.$preview.bind("keyup"+b,function(a){if(e.init&&e.lockTypeIn)return!1;if(!(a.which>=37&&a.which<=40))return 16===a.which&&(f.shiftActive=!1),18===a.which&&(f.altActive=!1),16===a.which||18===a.which?(f.showKeySet(),void setTimeout(function(){f.$preview.focus()},200)):void 0}).bind("keydown"+b,function(a){return e.init&&e.lockTypeIn?!1:(a.temp=!1,16===a.which&&(a.temp=!f.shiftActive,f.shiftActive=!0),18===a.which&&(a.temp=!f.altActive,f.altActive=!0),a.temp&&(f.showKeySet(),f.$preview.focus()),f.typing_event=!0,void((8===a.which||9===a.which)&&f.typing_findKey("",a)))}).bind("keypress"+b,function(a){return e.init&&e.lockTypeIn?!1:void(f.typing_event&&!f.options.lockInput&&(f.typing_reset(),f.typing_event=!0,f.typing_findKey("",a)))})},f.typing_reset=function(){f.typing_event=e.init=!1,e.text="",e.len=e.current=0,f.options.lockInput=e.savedLockInput},f.typeIn=function(a,b,c,d){if(!f.isVisible())return clearTimeout(f.typing_timer),void f.typing_reset();if(f.typing_event){if("undefined"==typeof a)return f.typing_event=!1,void(f.options.lockInput=e.savedLockInput)}else e.init!==!0&&(e.init=!0,f.options.lockInput=e.lockTypeIn,e.text=a||e.text||"",e.len=e.text.length,e.delay=b||300,e.current=0,c&&(e.callback=c)),a=e.text.substring(e.current,++e.current),"{"===a&&"}"===e.text.substring(e.current+1,e.current+2)&&(a+=e.text.substring(e.current,e.current+=2)),f.typing_findKey(a,d)},f.typing_findKey=function(b,c){var g,h,i,j,k,l,m,n,o=d.css,p=d.builtLayouts[f.layout].mappedKeys;if(f.isOpen&&f.$keyboard.length)if(l=f.$keyboard.find("."+o.keySet),j=b in f.typing_keymap?f.typing_keymap[b]:b,g="."+o.keyButton+'[data-action="'+j+'"]',f.typing_event&&c&&(f.typing_xref.hasOwnProperty(c.keyCode||c.which)?g="."+o.keyPrefix+f.typing_xref[c.keyCode||c.which]:(h=String.fromCharCode(c.charCode||c.which),g=p.hasOwnProperty(h)?"."+o.keyButton+'[data-action="'+p[h]+'"]':"."+o.keyPrefix+(c.charCode||c.which))),k=l.filter(":visible").find(g),k.length?f.typing_simulateKey(k,b,c):(f.typing_event?k=l.find(g):(i=b in f.typing_keymap?f.typing_keymap[b]:b.charCodeAt(0),k=l.find("."+o.keyPrefix+i)),n=k.closest("."+o.keySet),n.attr("name")?(m=n.attr("name"),f.shiftActive=/shift/.test(m),f.altActive=/alt/.test(m),f.metaActive=f.last.keyset[2]=m.match(/meta\d+/)||!1,f.showKeySet({name:f.metaActive}),f.typing_simulateKey(k,b,c)):f.typing_event||(b in f.typing_keymap&&f.typing_keymap[b]in d.keyaction?d.keyaction[f.typing_keymap[b]](f,k,c):f.insertText(b),f.checkCombos(),f.$el.trigger(d.events.kbChange,[f,f.el]))),e.current<=e.len&&0!==e.len){if(!f.isVisible())return;setTimeout(function(){f.typeIn()},e.delay)}else{if(0!==e.len)return f.typing_reset(),void(a.isFunction(e.callback)&&setTimeout(function(){a.isFunction(e.callback)&&e.callback(f)},e.delay));f.typing_reset()}},f.typing_simulateKey=function(b,c,g){var h=b.length;h&&b.filter(":visible").trigger("mouseenter"+f.namespace),f.typing_timer=setTimeout(function(){var h=b.length;h&&setTimeout(function(){b.trigger("mouseleave"+f.namespace)},e.delay/3),f.isVisible()&&(f.typing_event||(c in f.typing_keymap&&f.typing_keymap[c]in d.keyaction?(g=g||a.Event("keypress"),g.target=b,d.keyaction[f.typing_keymap[c]](f,b,g)):f.insertText(c),f.checkCombos(),f.$el.trigger(d.events.kbChange,[f,f.el])))},e.delay/3)},e.showTyping&&(f.options.alwaysOpen&&f.isVisible()&&f.typing_setup(),f.$el.bind(d.events.kbBeforeVisible+f.typing_namespace,function(){f.typing_setup()})))})}}),/*! Mousewheel version: 3.1.12 * (c) 2014 Brandon Aaron * MIT License */
function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});